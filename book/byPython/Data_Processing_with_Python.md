---
title: Pythonプログラミング入門
author: Takeshi Seki
date: 2024-02-28
version: 0.1.0
---

# まえがき
必要なところだけ読んで下さい。

# Pythonプログラミング入門

## コンピュータとプログラミング言語
コンピュータ[^1]の主要な構成要素はCPU[^2]、メインメモリー、ファイルストレージからなります。我々がコンピュータプログラムを作成するとき、つまりプログラミングをするとき、主にCPUに対する命令を記述することになります[^3]。コンピュータは電気のオンオフ[^4]で動いていて、本来、命令や値も2進数で表す必要があります。さすがにこれは人にとっては困難がともないますので、人にも（比較的）理解しやすい命令の仕方、としてプログラミング言語があります。

プログラミング言語は前述のようにコンピュータに任意の命令を与えるために作られたものです。それぞれのプログラミング言語にはそれぞれクセがあって、経験の少ない方にとっては、とっつきにくことが多々あると思います。これを打破するためには、あまり深く考えずに受け入れるのが一番だと思います。一方で、コンピュータは感情や好みで動くようなことはなく、基本的に命令を忠実に実行します。ここには論理性が重んじられる事になります。

人が作った論理的なもの、まぁパズルゲームぐらいの感覚がちょうど良いかもしれません。論理性やプログラミングのクセも慣れれば、それほどは苦にならないと思いますので、気楽に取り組んではいかがでしょうか。

プログラムを作ることを、コードを書くという事があります。ほかにもコードはソースやソースコードと呼ばれることもあります。本書ではなるべくコードと呼ぶことにします。

[^1]: 日本語では電子計算機
[^2]: Central Processing Unit、中央演算処理装置
[^3]: 厳密には少し違いますが、まずはそう考えて良いと思います。
[^4]: 電気のオンを1、オフを0（逆の場合もある）とした2進数の世界です。

### 用語のハードル
どの専門分野でも用語のハードルはつきものです。コンピュータやプログラミングの専門知識がない、あるいは慣れていない人にとって、障壁になる場合があります。このテキストでは初めて出会う専門用語は**強調文字**で示し、解説を添えます。著者が専門用語と思っていないなどの理由で解説がされていない場合は、ご一報頂けると幸いです。巻末に用語の一覧を掲載していますので活用してください。

### 英語のハードル
コンピュータはアメリカ生まれアメリカ育ちですので、言ってみれば母国語は英語です。プログラミングも英語の単語や文法を元に作られていることが多いように思います。英語が苦手な人にも難しい部分も多いのも事実です。特にコードに間違いがあった場合、Pythonに限らずプログラミング言語の処理系はエラーメッセージを表示して処理を中止します。このエラーメッセージは原則すべて英語です。プログラミングを始めてたのに諦めてしまう人の原因のほとんどがこれではないかと思います。英語に精通していなくても、慣れればある程度推測できるようになります。しかし、初めのうちは難しいので、[DeepL](https://www.deepl.com/)などの機械翻訳を利用するのは良い考えだと思います。

## [Python](https://www.python.org)とは

1991年にオランダ人のGuido van Rossumが開発したインタプリタ型高水準汎用スクリプト言語です。
プログラムの読みやすさを重視して、学習コストや再利用のしやすさで人気を博しています。
現代的な機能（高水準）を備え、さまざまなソフトウェア開発に使用できる汎用性を備えています。
特にディープラーニングといったAI（人工知能）の開発にPythonは人気があります。
Pythonに標準で備わっていない機能は外部ライブラリとしてさまざまなものが用意されています。

Pythonの関連文書にPython Enhancement Proposal: PEPという文書群があり、さまざまな提案がされています。その中にPEP 8 Pythonのコードスタイルガイドがあり、コードの書き方（見た目のフォーマット）について提案されています。これに従うことにより、誰が書いても人による癖がなく読みやすいコードになります。Pythonの仕様も読みやすくなるように設計されていることもあり、初学者にとっては比較的混乱が少なく、学習しやすいとされています。

### [PEP 8 Pythonのコードスタイルガイド](https://pep8-ja.readthedocs.io/ja/latest/)[^5]

PEP 8はPythonのコードを書く際のガイドラインです。コードの読みやすさ、一貫性を考慮して提案されています。我々が取り急ぎ見習うべきものは以下のようなものがあります。

- 1レベルインデントするごとに、スペースを4つ。
- 変数名は小文字の英単語とアンダースコア。
- １行は79文字まで。
- 括弧のすぐ内側にはスペースを入れない。

などなど。後日追記します。

[^6]: 原文 [PEP 8 - Style Guide for Python Code](https://peps.python.org/pep-0008/)

### Pythonのバージョンについて
Pythonのバージョンはピリオドで区切られた3つの数字で3.12.2のように表されます。この文書の執筆時点でPythonの最新版は3.12.2です。初めの値はメジャーバージョンで大規模な仕様の変更があったとき増えます。中央の値はマイナーバージョンで小規模な機能追加などの変更によって増えます。最後の値はリビジョンでバグの修正や安定性向上など、機能に直接関係のない更新のときに増えます。

現在のPythonのメジャーバージョンは３ですが、少し前までバージョン2もサポートされていましたが現在はサポートを終了しています。この2つのバージョンは互換性がありませんので、新たにプログラムを作成する場合はバージョン3を使用して下さい。この文書ではバージョン3.10以降を対象にします。


# Google Colaboratory

PythonをWeb上でインタラクティブに実行出来るようにした[Jupyter Notebook](https://jupyter.org)[^6]という環境があります。これはJulia、Python、Rの各言語が実行できる環境です。これののGoogle版がGoogle Colaboratory、略してColabです。ColabはPythonとRのみをサポートしています。Googleのアカウントがあれば誰でも基本的に無料で使用できます。

[^6]: 現在では後継のJupyterLabという環境に移行しています。

## Colabの操作

### 準備
Colabを使い始める前に、少しだけColabの設定をしましょう。Colabのインデントはデフォルトでスペースが2つですがPEP 8に従って、スペースを4つに設定します。メニューのツールから設定を開き、エディタタブで「インデント幅（スペース）」を4に変更します。また、他の人と同じファイルをリモートで見て会話するには行番号があった方が話しやすいので、「行番号を表示」にチェックをいれ保存をクリックします。

Colabには関数名などの自動補完機能がありますが、ランタイムに接続している必要が（たぶん）あります。コードを書き始めるときに、右上の「接続」をクリックしましょう。接続がクリックすると、接続の代わりにRAMとディスクという表示に変わります。

ランタイムとは実際にPythonを実行するGoogleのサーバーのことです。使用し終わったときにはRAMとディスクの表示の右の三角をクリックして「ランタイムを接続解除して削除」を選択するのが礼儀かもしれません。実際は閉じてしばらくすると自動的に接続解除・削除されますので、それほど神経質になる必要はありません。ランタイムを接続解除・削除すると、そのとき保持していたファイルなども削除されるので気を付けて下さい。操作方法は後術します。

### Colabの画面構成
Webブラウザのウィンドウサイズに依って、配置は多少換わります。一番広いメインのエリアが我々がこれからコードとそれに関連したテキストを記述するスペースになります。この部分は「テキスト」と「コード」の２種類の「セル」を配置して、それぞれその名の通りテキストとコードを記述します。セルはいくらでも追加できるので必要に応じて分割して記述できます。

このメインのエリアは必要に応じて分割して表示することができます。例えばセルを選択し、セルの右上のアイコンから「タブのミラーセル」をクリックすると右側にそのセルが固定表示されます。

左側には目次やファイルリストを表示出来ます。左に並んでいるアイコンをクリックすると関連項目が表示されます。もう一度同じアイコンをクリックするか、右上の×アイコンをクリックすると閉じます。また右上の×の隣のアイコンをクリックするとメインのエリアの右側に固定表示されます。

### セルの操作
セルのを編集するには、編集するセルを選択する必要があります。セルをクリックすると選択した状態になります。セルを追加するには画面左上の「＋コード」あるいは「＋テキスト」をクリックします。あるいは選択されているセルの下の境界にマウスポインタを近づけると同様にボタンが表示されるのでそれをクリックします。
選択されたセルの右上にセルに対して出来る操作のアイコンが表示されます。

セルにタイトルが設定されていると、タイトルの左に下向きの三角矢印アイコンが表示され、クリックすることによってセクションの折りたたみ、展開ができます。

テキストセルを編集するにはセルをダブルクリックするかセルの右上の編集アイコンをクリックします。

コードが非表示のコードセルを編集するには、コードを表示をクリックするか、タイトルをダブルクリックして、コードを表示させます。


### コードの実行
コードを実行するには左側の再生アイコンをクリックします。
サンプルファイルを開いて、コードセル左側の再生アイコンをクリックしてみましょう。Pythonとよく利用するパッケージのバージョンが表示されます。

ColabやColabで実行されるPythonやパッケージは頻繁にバージョンアップされます。バージョンによる不具合もありますので、必要に応じてバージョンを確認しましょう。

### テキストセルの編集
テキストセルにはコードの関連情報を記述します。Pythonを学習中の場合は、学んだコードに併せたメモに利用出来ます。本文書のサンプルでもテキストセルに解説を記述している場合あります。テキストはMarkdownとよばれるタグ付けが出来ます。タグによって簡易に書式を指定する仕組みです。

# Markdown

MarkdownはWebページの様に一貫した書式指定したドキュメントを作成するためのシンプルな書式指定タグ付けシステムです。ベースとなるタグは限られていて、システムにより独自のタグが作られています。
Colabで使用出できるタグの詳細はColabの[Markdown Guide](https://colab.research.google.com/notebooks/markdown_guide.ipynb)を参照して下さい。数式を記述することもできます。

実質的に簡易な書式指定のデファクトスタンダードになりつつあります。例えばチャットツールのSlackやDiscord、ホームページ作成のデファクトスタンダードになったWordpressなど、Markdownを使える場面がたくさんありますので習得しておくと便利です。

幾つかの例を下に示します。

## 見出し

```markdown
# 見出し1
## 見出し2
### 見出し3
#### 見出し4
##### 見出し5
###### 見出し6
```
# 見出し1
## 見出し2
### 見出し3
#### 見出し4
##### 見出し5
###### 見出し6

## 本文と段落

```markdown
本文テキスト。ただ文章を入力する。
改行は無視される（スペースと同じ）。

段落を変えるには空行を入れる
```
本文テキスト。ただ文章を入力する。
改行は無視される（スペースと同じ）。

段落を変えるには空行を入れる。

## 箇条書き、番号付きリスト

```markdown
- 箇条書き1
- 箇条書き2
    - インデントあり 箇条書き3

1. 順序付きリスト1
1. 順序付きリスト2
```
- 箇条書き1
- 箇条書き2
    - インデントあり 箇条書き3

1. 順序付きリスト1
1. 順序付きリスト2

## 強調

```markdown
**強調 セミナー中のメモ等に活用してください。**
```
**強調 セミナー中のメモ等に活用してください。**


# 初めてのプログラミング

ここからは具体的なプログラミングの解説に入ります。コードをColabのコードセルに入力し実行して、結果がどのようになるか確認していきましょう。

## Hello World

プログラミング言語の入門の定番で"Hello World"という文字列を画面に表示することを学びます。
Pythonでは次のように記述します。実際にColabで実行してみて下さい。

```python
print('Hello World')
```

ただしくHello Worldと表示されたでしょうか。エラーになった場合は入力間違いがないかよく確認しましょう。ここでエラーになる場合は

- `print`、`(`、`)`、`'`のいずれか、あるいはすべて全角になっている。
- printの大文字と小文字の違い。すべて小文字です。
- 行頭にスペースが入っている
- `)`の後に全角のスペースが入っている

のいずれかです。よく確認して、修正、再度実行して見ましょう。

### このコードから学ぶこと

たった1行のコードですが、学ぶことがたくさんあります。

#### 文字列

「'Hello World'」はPythonで扱えるデータの一種で**文字列 String**といいます。データの種類をプログラミングの世界では**型 Type**といいます。Pythonの内部で文字列を表す識別子は`str`です。`str`は後で詳しく解説します。

文字列を表すには引用符`'`または`"`で囲みます。混ぜるな危険、`'Hello World"`のように、初めは`'`、終わりは`"`はエラーになります。2種類引用符があるのは片方を文字として扱いたいときに、もう片方を使うためです。`print('"')`とすると「"」が、`print("'")`とすると「'」が画面に表示されます。
文字列は日本語も`'こんにちは'`のように、もちろん使うことができます。

#### 関数
`print(...)`のように小文字の名前に()が付いた形を**関数 function**といいます。Excelの関数と同じようなものと考えて差し支えありません。この例の場合、`print`が関数名、かっこの中身を**引数 argument**と言います。`print`のように標準で使える関数を**組み込み関数 Built-in Function**といいます。

## Hello World Again!

次のコードを入力して実行してみてください。2行目の行頭のスペースはtabキーで入力します。

```python
print('Hello World')
    print('Hello World')
```
このコードは必ず**エラー Error**になります。

### エラーの原因

Pythonではインデント（行頭のスペース）に意味があります。この場合はインデントがあってはならないところにインデントがあったためエラーになりました。

### エラーメッセージ

Pythonから見て、コードになんらかの問題が合った場合、エラーメッセージを表示して処理を中断します。エラーメッセージは、どこに問題があったのかを示しています。

今回のエラーメッセージは次のようなものです。
`"<`と`>"`の間の数字は異なる場合があります。

```python
File "<ipython-input-4-7a69e3c1a937>", line 2
    print('Hello World!')
    ^
IndentationError: unexpected indent
```
エラーメッセージの内容は次の通りです。

- `File "<ipython-input-4-7a69e3c1a937>", line 2`
    ファイル名"\<ipython-input-4-7a69e3c1a937\>"の2行目にエラーがあります。
- `^`キャレットの上の文字列付近にエラーがあることを示しています。この場合は`print`の`p`付近にあることを示しています。
- `IndentationError`はエラーの種類です。インデントに問題があることを示しています。
- `unexpected indent`は具体的なエラーの内容です。日本語では「期待していないインデント」

ファイル名はJupyter独特で、Jupyterの内部的な表現になります。JupyterやColabの場合、通常は実際にコードを記述しているファイルと考えて、ほぼ問題ありません。

つまりこのエラーメッセージは、「2行目のprintの始めに問題があり、インデントがあってはならない所にインデントがある」と伝えています。インデントを削除して実行するとエラーは発生しなくなります。

エラーの種類はたくさんあって戸惑うことが多いと思います。しかし、ほとんどは入力ミスによるものですので、エラーになった場合は良くコードを確認しましょう。よくある入力間違いとしては、

- スペルミス
- 半角であるべきところを全角で入力した
- 括弧や引用符の始めか終わりが抜けている、片方が全角になっている

などがあります。よく見かける、あるいは困惑しそうなエラーメッセージを巻末にまとめましたので参照してください。慣れてくれば、「あ、ここね」のようにすぐ理解できるようになります。

---
- コメント
- 文字列

- 文字列演算、算術演算
- 型、関数、オブジェクト
    Integer
    Float
    String
- 誤差
- パッケージ、モジュール
- numpy.ndarray
    - 平均値、積分値、最大値

# Appendix

## よく使うPythonパッケージ

- [Numpy](https://numpy.org)
    - 数値演算、特に行列演算が得意
- [Scipy](https://scipy.org)
    - 科学技術計算、時系列データ処理
- [Matplotlib](https://matplotlib.org)
    - ビジュアライゼーション、グラフ
- [pandas](https://pandas.pydata.org)
    - データ分析、統計
- [bokeh](http://bokeh.org)
    - ビジュアライゼーション、インタラクティブなグラフ

## 用語

- プログラム
    - コンピュータプログラムの略。コンピュータに与える命令の集まり。一般的にはコンピュータが命令を実行できるようにしたもの。
- プログラミング
    - プログラムを作ること。
- プログラミング言語
    −プログラムを作るための言語。
    - Python、C、Java、Javascript、PHPなどたくさんの種類がある。 
- ソースコード
    - プログラミング言語で記述した命令のあつまり。人が読める形式。コンパイラ型の言語では実行形式に変換する前（「ソース」は「元の」の意）のもの。
- ソース
    - ソースコードの略。
- コード
    - ソースコードの略。

## エラーコレクション

よくある間違いなどを集めました。ほとんどは入力ミスです。度々遭遇するので慣れると思いますが、参考に。

```python
print('Hello World!')
    print('Hello World!')
```
```python
File "<ipython-input-4-7a69e3c1a937>", line 2
    print('Hello World!')
    ^
IndentationError: unexpected indent
```
- `IndentationError`
    - インデントの間違い
- `unexpected indent`
    - 不要なインデント

- 行頭の字下げインデントに意味があるので不必要なインデントをしてはならない
- PEP 8 ではインデントはスペース4つとなっていて本テキストでもそのようにしていますが、行頭に1つでも空白があるとインデントとみなされます。

---
``` python
print('Hello World!)
print('こんにちは’)
```
```python
  File "<ipython-input-3-6d22d03c5544>", line 1
    print('Hello World)
                       ^
SyntaxError: EOL while scanning string literal
```
- `SyntaxError`
    - 構文（文法）間違い
- `EOL while scanning string literal`
    - 文字列を調べている間に行末に達した

- 1行目の文字列の終わりの引用符がない
- 文字の色を参考に

---
``` python
print(’こんにちは’)
print('こんにちは’）
```
```python
  File "<ipython-input-8-2d7fd5f03d5a>", line 1
    print(’こんにちは’)
          ^
SyntaxError: invalid character '’' (U+2019)
```
- `SyntaxError`
    - 構文（文法）間違い
- `invalid character '’' (U+2019)`
    - 無効な文字
    - 使えな場所で全角文字などを使用
- 1行目の引用符が全角になっている

---
``` python
Print('Hello World!')
print('Hello World!')
```
```python
---------------------------------------------------------------------------
NameError                                 Traceback (most recent call last)
<ipython-input-10-983c3189a5cf> in <cell line: 1>()
----> 1 Print('Hello World!')

NameError: name 'Print' is not defined
```
- `NameError`
    - 名前の間違い
- `name 'Print' is not defined`
    - 'Print'は定義されていません

- 大文字と小文字の間違い、スペルミス


---
```python
print(3 + '2')
```
```python
---------------------------------------------------------------------------
TypeError                                 Traceback (most recent call last)
<ipython-input-1-4f605c4b9ee9> in <cell line: 1>()
----> 1 print(3 + '2')

TypeError: unsupported operand type(s) for +: 'int' and 'str'
```
- `TypeError`
    - 型の間違い
- `unsupported operand type(s) for ...`
    - +演算子の被演算子に整数と文字列はサポートされていない
    - 数字と文字は足せない
- 文字はコンピュータにとってただの記号で意味はない

---
```python
len = 10
word_length = len('python')
print(word_length)
```
```python
---------------------------------------------------------------------------
TypeError                                 Traceback (most recent call last)
<ipython-input-55-777eeae6954e> in <cell line: 2>()
      1 len = 10
----> 2 word_length = len('python')
      3 print(word_length)

TypeError: 'int' object is not callable
```
- `TypeError`
    - 型の間違い
- `'int' object is not callable`
    - `int`オブジェクトは呼び出せない
- 既存の関数名を変数名として使うと元の関数が使えなくなる
- 知らず知らずにやってしまうことがある

---
```python
name = 'python'
print(name[10])
```

```python
---------------------------------------------------------------------------
IndexError                                Traceback (most recent call last)
<ipython-input-9-b6b2c9db5090> in <cell line: 2>()
      1 name = 'python'
----> 2 print(name[10])

IndexError: string index out of range
```
- `IndexError`
    - インデックスの指定間違い
- `string index out of range`
    - 文字列のインデックスが範囲を超えている
- 大き過ぎるインデックスを指定した

---
```python
name = 'python'
name[3] = H
print(name)
```

```python
Traceback (most recent call last):
  File "<stdin>", line 2, in <module>
TypeError: 'str' object does not support item assignment
```
- `TypeError`
    - 型の間違い
- `'str' object does not support item assignment`
    - strオブジェクトは要素に代入できない
- 文字列はイミュータブルなので要素を変更出来ません

---
```python
numbers = np.arange(12)
print(f'2x5:\n{numbers.reshape((2, 5))}')
```

```python
---------------------------------------------------------------------------
ValueError                                Traceback (most recent call last)
<ipython-input-41-b92b51154aab> in <cell line: 2>()
      1 numbers = np.arange(12)
----> 2 print(f'2x5:\n{numbers.reshape((2, 5))}')

ValueError: cannot reshape array of size 12 into shape (2,5)
```

- `ValueError`
    - 値の間違い
- `cannot reshape array of size 12 into shape (2,5)`
    - `要素の数が12の配列を2行5列に変換できない
- 要素の数が変更後の行列と合わない

---
```python
num = 0
for i in range(10)
    num += i
```

```python
  File "<ipython-input-8-1aeaee0090f8>", line 2
    for i in range(10)
                      ^
SyntaxError: expected ':'
```

- `SyntaxError`
    - 構文の間違い
- `expected ':'`
    - `':'`が期待される
- 必要な`':'`を忘れた

---
## お役立ちツール

- [Python.jp](https://www.python.jp)
    - 日本語によるPythonの情報サイト
- [DeepL](https://www.deepl.com/)
    - 機械翻訳
- [Marp](https://marp.app)
    - Markdownによるスライドショー

